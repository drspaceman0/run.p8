pico-8 cartridge // http://www.pico-8.com
version 27
__lua__
--- init

function _init()

end


-->8
--- updates
-- timer
_t=0
_f=0
_fs=12
-- screen shake
_offset=0.2 -- intensity
_fade=0.75-- duration
-- enemy values
_mask_d=20--distance of mask
function _update()
 _t+=1
 if(_t%_fs==0)then
  _f+=1
 end
end
-->8
--- draw
-- screen size: 128x128
-- sprite size: 8x8
-- mask: 32x32

function _draw()
 if _t%2==0 then
  cls()
 
	 --screen_shake()
	 f= 0 + (_f%3)*4
	 spr(f,48,48,4,4)
	 
	 footstep(4)
	 ui()
	end
end

function ui()
 fillp(0)
 rect(0,0,127,127,6)
end

--fill bytes ordered by fullness
_fill_byte={
0b0000000000000000,
0b1000000000000000,
0b1000000000100000,
0b1010000000100000,
0b1010000010100000,
0b1010010010100000,
0b1010010010100001,
0b1010010110100001,
0b1010010110100101,
0b1110010110100101,
0b1110010110110101,
0b1111010110110101,
0b1111010111110101,
0b1111110111110101,
0b1111110111110111,
0b1111111111110111,
0b1111111111111111
}
 

function footstep(r) 
 local row=0
 local y=0 
 
 for i=1,r do 
  y1=127-(i*4)
	 y2=y1+4
	 
	 c=i%16
	 
	 r=0.8
	 for j=0,127,4 do
	  
   x1=j
   x2=j+4
   if rnd(1)*i < r then
    b=4*(i)-flr(rnd(4)) 
   else 
    -- fade effect
    if i>3 then
     b=16
    else 
     b=4*(i+1)-flr(rnd(4)) 
    end
    
    b=4*(i)-flr(rnd(4))
   end
   
   if b > 12 then
    local a=flr(rnd(4))
    if a==0 then
     b=17 
    else
     b=17
    end
   end
   
   fillp(_fill_byte[b])
	  rectfill(x1,y1,x2,y2,8)
 	 
	 end
	 
--	 rectfill(1,y1,126,y2,8)
 end
end

-- change offset var to control
function screen_shake()
  local fade = _fade
  local offset_x=16-rnd(32)
  local offset_y=16-rnd(32)
  offset_x*=_offset
  offset_y*=_offset
  
  camera(offset_x,offset_y)
  _offset*=fade
  if _offset<0.05 then
    _offset=0
  end
end
 
__gfx__
00000022222222222222222222200000000000222222222222222222222000000000002222222222222222222220000000000000000000000000000000000000
00000022222222222222222222200000000000222282222222222222222000000000002222822222222222222220000000000000000000000000000000000000
00000022222222222222222222200000000000228228828222222222222000000000002282288282222222228220000000000000000000000000000000000000
00000022222222222222222222200000000000222822822228222222222000000000002228228222282222222820000000000000000000000000000000000000
00002222222222222222222222222000000022222222888222228222222220000000222222228882222282882882200000000000000000000000000000000000
00002222222222222222222222222000000022222222888888222222222220000000222222228888882222282822200000000000000000000000000000000000
00002222222222222222222222222000000022222222888882222222222220000000222222228888822222228222200000000000000000000000000000000000
00002222222222222222222222222000000022222282828882282222222220000000222222828288822822228282200000000000000000000000000000000000
00002222222222222222222222222000000022222222828288222222222220000000222222228282882222228222200000000000000000000000000000000000
00220022222222222222222222200220002200222222228228222222222002200022002222222282288888222820022000000000000000000000000000000000
00220022222222222222222222200220002200222222228222882222222002200022002222222282228888222880022000000000000000000000000000000000
00220000000002222222000000000220002200000000022222820000000002200022000000000222228800000000022000000000000000000000000000000000
00220000000002222222000000000220002200000000022222220000000002200022000000000222222200000000022000000000000000000000000000000000
00222220008000022200008000222220002222200080000222000080002222200022222000800002220000800022222000000000000000000000000000000000
00222220000000022200000000222220002222200000000222000000002222200022228000000002220000000022222000000000000000000000000000000000
00222222222220022200222222222220002222222222200222002882222222200022282282222002220028822222222000000000000000000000000000000000
00222222222220022200222222222220002222222222200222002282222222200022288822222002220022822222222000000000000000000000000000000000
00222222222220022200222222222220002222222222200222002888822222200022228222222002820028888222222000000000000000000000000000000000
00222220022222222222222200222220002222200222222222222888002882200022822002228222882228880028822000000000000000000000000000000000
00222220022222222222222200222220002222200222222222228888002822200022888002228228222288880028222000000000000000000000000000000000
00222220000002222222000000222220002222200000022222220000008222200022822000000288222200000082222000000000000000000000000000000000
00222220000002222222000000222220002222200000022222220000008282200022222000000888282200000082822000000000000000000000000000000000
00002222200000000000000022222000000022222000000000000000228220000000222820000000000000002282200000000000000000000000000000000000
00002222200000000000000022222000000022222000000000000000282820000000882220000000000000002828200000000000000000000000000000000000
00002222200000000000000022222000000022222000000000000000882880000000222220000000000000008828800000000000000000000000000000000000
00002222200000000000000022222000000022222000000000000000222820000000222820000000000000002228200000000000000000000000000000000000
00002222200000000000000022222000000022222000000000000000228220000000288220000000000000002282200000000000000000000000000000000000
00000022222000000000002222200000000000222220000000000022222000000000002288800000000000222220000000000000000000000000000000000000
00000022222000000000002222200000000000222220000000000022222000000000002282200000000000222220000000000000000000000000000000000000
00000000022222222222222200000000000000000222222222222222000000000000000008222222822222220000000000000000000000000000000000000000
00000000022222222222222200000000000000000222222222222222000000000000000002282222222222220000000000000000000000000000000000000000
__label__
66666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666
60000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000006
60000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000006
60000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000006
60000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000006
60000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000006
60000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000006
60000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000006
60000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000006
60000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000006
60000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000006
60000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000006
60000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000006
60000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000006
60000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000006
60000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000006
60000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000006
60000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000006
60000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000006
60000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000006
60000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000006
60000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000006
60000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000006
60000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000006
60000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000006
60000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000006
60000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000006
60000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000006
60000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000006
60000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000006
60000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000006
60000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000006
60000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000006
60000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000006
60000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000006
60000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000006
60000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000006
60000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000006
60000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000006
60000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000006
60000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000006
60000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000006
60000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000006
60000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000006
60000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000006
60000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000006
60000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000006
60000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000006
60000000000000000000000000000000000000000000000000000022222222222222222222200000000000000000000000000000000000000000000000000006
60000000000000000000000000000000000000000000000000000022228222222222222222200000000000000000000000000000000000000000000000000006
60000000000000000000000000000000000000000000000000000022822882822222222282200000000000000000000000000000000000000000000000000006
60000000000000000000000000000000000000000000000000000022282282222822222228200000000000000000000000000000000000000000000000000006
60000000000000000000000000000000000000000000000000002222222288822222828828822000000000000000000000000000000000000000000000000006
60000000000000000000000000000000000000000000000000002222222288888822222828222000000000000000000000000000000000000000000000000006
60000000000000000000000000000000000000000000000000002222222288888222222282222000000000000000000000000000000000000000000000000006
60000000000000000000000000000000000000000000000000002222228282888228222282822000000000000000000000000000000000000000000000000006
60000000000000000000000000000000000000000000000000002222222282828822222282222000000000000000000000000000000000000000000000000006
60000000000000000000000000000000000000000000000000220022222222822888882228200220000000000000000000000000000000000000000000000006
60000000000000000000000000000000000000000000000000220022222222822288882228800220000000000000000000000000000000000000000000000006
60000000000000000000000000000000000000000000000000220000000002222288000000000220000000000000000000000000000000000000000000000006
60000000000000000000000000000000000000000000000000220000000002222222000000000220000000000000000000000000000000000000000000000006
60000000000000000000000000000000000000000000000000222220008000022200008000222220000000000000000000000000000000000000000000000006
60000000000000000000000000000000000000000000000000222280000000022200000000222220000000000000000000000000000000000000000000000006
60000000000000000000000000000000000000000000000000222822822220022200288222222220000000000000000000000000000000000000000000000006
60000000000000000000000000000000000000000000000000222888222220022200228222222220000000000000000000000000000000000000000000000006
60000000000000000000000000000000000000000000000000222282222220028200288882222220000000000000000000000000000000000000000000000006
60000000000000000000000000000000000000000000000000228220022282228822288800288220000000000000000000000000000000000000000000000006
60000000000000000000000000000000000000000000000000228880022282282222888800282220000000000000000000000000000000000000000000000006
60000000000000000000000000000000000000000000000000228220000002882222000000822220000000000000000000000000000000000000000000000006
60000000000000000000000000000000000000000000000000222220000008882822000000828220000000000000000000000000000000000000000000000006
60000000000000000000000000000000000000000000000000002228200000000000000022822000000000000000000000000000000000000000000000000006
60000000000000000000000000000000000000000000000000008822200000000000000028282000000000000000000000000000000000000000000000000006
60000000000000000000000000000000000000000000000000002222200000000000000088288000000000000000000000000000000000000000000000000006
60000000000000000000000000000000000000000000000000002228200000000000000022282000000000000000000000000000000000000000000000000006
60000000000000000000000000000000000000000000000000002882200000000000000022822000000000000000000000000000000000000000000000000006
60000000000000000000000000000000000000000000000000000022888000000000002222200000000000000000000000000000000000000000000000000006
60000000000000000000000000000000000000000000000000000022822000000000002222200000000000000000000000000000000000000000000000000006
60000000000000000000000000000000000000000000000000000000082222228222222200000000000000000000000000000000000000000000000000000006
60000000000000000000000000000000000000000000000000000000022822222222222200000000000000000000000000000000000000000000000000000006
60000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000006
60000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000006
60000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000006
60000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000006
60000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000006
60000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000006
60000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000006
60000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000006
60000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000006
60000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000006
60000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000006
60000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000006
60000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000006
60000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000006
60000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000006
60000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000006
60000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000006
60000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000006
60000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000006
60000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000006
60000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000006
60000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000006
60000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000006
60000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000006
60000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000006
60000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000006
60000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000006
60000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000006
60000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000006
60000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000006
60000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000006
60000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000006
60000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000006
60000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000006
60000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000006
60000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000006
60000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000006
68080000000800080008080808080808000800080008000008080808000800000008080800080808080800080008000800080008000800080008000800080006
60808080808080808080808080808080808080808080808080808080808080808080808080808080808080808080808080808080808080808080808080808086
68080800080808000800080808080808080008000808080008080808080008000800080808000808080808000808080008000800080808080800080808000806
60808080808080808080808080808080808080808080808080808080808080808080808080808080808080808080808080808080808080808080808080808086
68080808080808080808080808080808080808080808080808080808080808080808080808080808080808080808080808080808080808080808080808080806
60888888808080888888808880808088808880888080808080888080808080808088808880888080808880888088888880888888808888888080808888888086
68080808080808080808080808080808080808080808080808080808080808080808080808080808080808080808080808080808080808080808080808080806
68808888888088808888888088808880888888888880888088888880888088808888888888888880888888888888888888808888888888888880888088888886
68880888088808880888088808880888088888880888080808880808888888888888080808880808088808880808088808888888888808880888888808880886
68888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888886
68888808880888888808880888088888888888888808880888088808888888888888880888088808880888088808880888888888888888888808888888888886
66666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666

